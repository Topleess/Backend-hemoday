# üß™ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é API

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤–∞—à–µ–≥–æ –±—ç–∫–µ–Ω–¥–∞. –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **curl**, **Postman**, **HTTPie** –∏–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Swagger.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ó–∞–ø—É—Å–∫ API](#–∑–∞–ø—É—Å–∫-api)
2. [Swagger UI](#swagger-ui)
3. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
4. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏)
5. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-–∑–∞–≥—Ä—É–∑–∫–∏-—Ñ–∞–π–ª–æ–≤)
6. [–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è](#–ø—Ä–æ–≤–µ—Ä–∫–∞-–¥–∞–Ω–Ω—ã—Ö-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
7. [–ü—Ä–∏–º–µ—Ä—ã —Å curl](#–ø—Ä–∏–º–µ—Ä—ã-—Å-curl)

---

## üöÄ –ó–∞–ø—É—Å–∫ API

```bash
# –í Docker
docker-compose up -d

# –õ–æ–∫–∞–ª—å–Ω–æ
make run
# –∏–ª–∏
uvicorn app.main:app --reload
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8000`

---

## üìö Swagger UI

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Swagger:

**–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:** http://localhost:8000/docs

–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ:
- –£–≤–∏–¥–µ—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- –ü—Ä–æ—á–∏—Ç–∞—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –£–≤–∏–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ Swagger UI

1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Authorize"** –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
2. –í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ: `Bearer YOUR_ACCESS_TOKEN`
3. –ù–∞–∂–º–∏—Ç–µ "Authorize"
4. –¢–µ–ø–µ—Ä—å –≤—Å–µ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

---

## üîê –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /api/v1/auth/register`

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:** –¢–µ–ø–µ—Ä—å –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ **email** –∏ **password**. –ò–º—è, –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –∏ –≤–µ—Å –±–æ–ª—å—à–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è!

```bash
curl -X POST "http://localhost:8000/api/v1/auth/register" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "password123"
  }'
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "bearer",
  "user_id": "550e8400-e29b-41d4-a716-446655440000",
  "family_id": "660e8400-e29b-41d4-a716-446655440001",
  "invite_code": "ABC123"
}
```

**–í–∞–∂–Ω–æ:** –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ `access_token` –∏ `invite_code` –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —Ç–µ—Å—Ç–æ–≤!

### 2. –í—Ö–æ–¥ (Login)

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /api/v1/auth/login`

```bash
curl -X POST "http://localhost:8000/api/v1/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "password123"
  }'
```

**–û—Ç–≤–µ—Ç:** –ê–Ω–∞–ª–æ–≥–∏—á–µ–Ω —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### 3. –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ —Å–µ–º—å–µ

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /api/v1/auth/join-family`

```bash
curl -X POST "http://localhost:8000/api/v1/auth/join-family" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "family_member@example.com",
    "password": "password123",
    "invite_code": "ABC123"
  }'
```

### 4. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `GET /api/v1/auth/me`

**–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è!**

```bash
curl -X GET "http://localhost:8000/api/v1/auth/me" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "email": "test@example.com",
  "family_id": "660e8400-e29b-41d4-a716-446655440001",
  "created_at": "2026-01-14T12:00:00Z"
}
```

### 5. üÜï –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /api/v1/auth/password-reset/request`

**–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è!** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å, —É–∫–∞–∑–∞–≤ —Å–≤–æ–π email.

```bash
curl -X POST "http://localhost:8000/api/v1/auth/password-reset/request" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com"
  }'
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å
2. –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. **–ü–æ–∫–∞ email –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω**, –≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞
4. –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SMTP –ø–∞—Ä–æ–ª—å –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –Ω–∞ email

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å:**
–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤ –ª–æ–≥–∏ Docker:
```bash
docker-compose logs -f backend
```

–í—ã —É–≤–∏–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
```
Password reset for test@example.com: AbC123XyZ987
```

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞:**
```bash
curl -X POST "http://localhost:8000/api/v1/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "AbC123XyZ987"
  }'
```

---

## üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### 1. Pull (–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å —Å–µ—Ä–≤–µ—Ä–∞)

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `GET /api/v1/sync`

**–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è!**

```bash
# –ü–µ—Ä–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (–±–µ–∑ last_pulled_at)
curl -X GET "http://localhost:8000/api/v1/sync" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"

# –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (—Å timestamp)
curl -X GET "http://localhost:8000/api/v1/sync?last_pulled_at=1705238400000" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "changes": {
    "transfusions": {
      "created": [...],
      "updated": [...],
      "deleted": [...]
    },
    "blood_tests": {...},
    "blood_test_results": {...},
    "analysis_templates": {...},
    "reminders": {...},
    "documents": {...}
  },
  "timestamp": 1705242000000
}
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ `timestamp` –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏!**

### 2. Push (–û—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä)

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /api/v1/sync`

**–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è!**

```bash
curl -X POST "http://localhost:8000/api/v1/sync" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "changes": {
      "transfusions": {
        "created": [
          {
            "id": "123e4567-e89b-12d3-a456-426614174000",
            "date": "2026-01-14T10:00:00Z",
            "volume_ml": 250,
            "patient_weight_kg": 30.5,
            "indicator_name": "Hemoglobin",
            "value_before": 85.0,
            "value_after": 95.0,
            "notes": "Regular transfusion"
          }
        ],
        "updated": [],
        "deleted": []
      },
      "blood_tests": {
        "created": [],
        "updated": [],
        "deleted": []
      }
    }
  }'
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "ok"
}
```

---

## üì§ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /api/v1/upload`

**–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è!**

```bash
curl -X POST "http://localhost:8000/api/v1/upload" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -F "file=@/path/to/your/document.pdf"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "file_url": "/uploads/660e8400-e29b-41d4-a716-446655440001/document_123456.pdf",
  "filename": "document_123456.pdf",
  "size": 102400
}
```

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:**
- –î–æ–∫—É–º–µ–Ω—Ç—ã: PDF, DOC, DOCX, TXT
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: JPG, JPEG, PNG

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ö–∞–∫ —É–∑–Ω–∞—Ç—å, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ?

**–°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ Pull —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é**

```bash
curl -X GET "http://localhost:8000/api/v1/sync" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

–≠—Ç–æ –≤–µ—Ä–Ω–µ—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ –≤–∞—à–µ–π —Å–µ–º—å–∏!

**–°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Swagger UI**

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000/docs
2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å
3. –û—Ç–∫—Ä–æ–π—Ç–µ `GET /api/v1/sync`
4. –ù–∞–∂–º–∏—Ç–µ "Try it out" ‚Üí "Execute"
5. –£–≤–∏–¥–∏—Ç–µ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ –∫—Ä–∞—Å–∏–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ

**–°–ø–æ—Å–æ–± 3: –ü—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å –∫ –ë–î (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)**

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –ë–î
docker-compose exec postgres psql -U postgres -d hemoday

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
SELECT id, email, family_id FROM users;

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ–º—å–∏
SELECT * FROM families;

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–ª–∏–≤–∞–Ω–∏—è
SELECT * FROM transfusions;

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–Ω–∞–ª–∏–∑—ã –∫—Ä–æ–≤–∏
SELECT * FROM blood_tests;
```

---

## üß™ –ü—Ä–∏–º–µ—Ä—ã –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

```bash
# 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
TOKEN=$(curl -s -X POST "http://localhost:8000/api/v1/auth/register" \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"password123"}' \
  | jq -r '.access_token')

echo "–¢–æ–∫–µ–Ω: $TOKEN"

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è
curl -X GET "http://localhost:8000/api/v1/auth/me" \
  -H "Authorization: Bearer $TOKEN"

# 3. –ü–µ—Ä–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (–ø—É—Å—Ç–∞—è –ë–î)
curl -X GET "http://localhost:8000/api/v1/sync" \
  -H "Authorization: Bearer $TOKEN"

# 4. –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
curl -X POST "http://localhost:8000/api/v1/sync" \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "changes": {
      "transfusions": {
        "created": [
          {
            "id": "550e8400-e29b-41d4-a716-446655440010",
            "date": "2026-01-14T10:00:00Z",
            "volume_ml": 250,
            "patient_weight_kg": 30.5,
            "indicator_name": "Hemoglobin",
            "value_before": 85.0,
            "value_after": 95.0
          }
        ],
        "updated": [],
        "deleted": []
      }
    }
  }'

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
curl -X GET "http://localhost:8000/api/v1/sync" \
  -H "Authorization: Bearer $TOKEN"
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è

```bash
# 1. –ó–∞–ø—Ä–æ—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
curl -X POST "http://localhost:8000/api/v1/auth/password-reset/request" \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com"}'

# 2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è
docker-compose logs -f backend | grep "Password reset"

# 3. –í–æ–π–¥–∏—Ç–µ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º
curl -X POST "http://localhost:8000/api/v1/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "TEMPORARY_PASSWORD_FROM_LOGS"
  }'
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –°–µ–º–µ–π–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

```bash
# 1. –ü–µ—Ä–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è
RESPONSE1=$(curl -s -X POST "http://localhost:8000/api/v1/auth/register" \
  -H "Content-Type: application/json" \
  -d '{"email":"parent1@example.com","password":"password123"}')

TOKEN1=$(echo $RESPONSE1 | jq -r '.access_token')
INVITE_CODE=$(echo $RESPONSE1 | jq -r '.invite_code')

echo "–ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è: $INVITE_CODE"

# 2. –ü–µ—Ä–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
curl -X POST "http://localhost:8000/api/v1/sync" \
  -H "Authorization: Bearer $TOKEN1" \
  -H "Content-Type: application/json" \
  -d '{
    "changes": {
      "transfusions": {
        "created": [{
          "id": "550e8400-e29b-41d4-a716-446655440020",
          "date": "2026-01-14T10:00:00Z",
          "volume_ml": 250,
          "patient_weight_kg": 30.5,
          "indicator_name": "Hemoglobin",
          "value_before": 85.0,
          "value_after": 95.0
        }],
        "updated": [],
        "deleted": []
      }
    }
  }'

# 3. –í—Ç–æ—Ä–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è –∫ —Å–µ–º—å–µ
TOKEN2=$(curl -s -X POST "http://localhost:8000/api/v1/auth/join-family" \
  -H "Content-Type: application/json" \
  -d "{\"email\":\"parent2@example.com\",\"password\":\"password123\",\"invite_code\":\"$INVITE_CODE\"}" \
  | jq -r '.access_token')

# 4. –í—Ç–æ—Ä–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–≤–æ–≥–æ!
curl -X GET "http://localhost:8000/api/v1/sync" \
  -H "Authorization: Bearer $TOKEN2"
```

---

## üêõ –û—Ç–ª–∞–¥–∫–∞ –∏ –ª–æ–≥–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í—Å–µ –ª–æ–≥–∏
docker-compose logs -f

# –¢–æ–ª—å–∫–æ backend
docker-compose logs -f backend

# –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
docker-compose logs --tail=100 backend
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:8000/health
```

### –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

**401 Unauthorized**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –¢–æ–∫–µ–Ω –∏–º–µ–µ—Ç —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30 –¥–Ω–µ–π)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Ñ–æ—Ä–º–∞—Ç `Bearer TOKEN`

**422 Unprocessable Entity**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç JSON
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö (—Å—Ç—Ä–æ–∫–∏, —á–∏—Å–ª–∞, –¥–∞—Ç—ã)

**500 Internal Server Error**
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏: `docker-compose logs backend`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

---

## üìù –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –º–∏–≥—Ä–∞—Ü–∏–π
docker-compose down
docker-compose up -d
docker-compose exec backend aerich upgrade

# –û—á–∏—Å—Ç–∫–∞ –ë–î (–í–ù–ò–ú–ê–ù–ò–ï: —É–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ!)
docker-compose down -v
docker-compose up -d

# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
docker-compose exec backend aerich migrate --name "migration_name"

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
docker-compose exec backend aerich upgrade
```

---

## üéØ –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–æ–ª—å–∫–æ email + password)
- [ ] –í—Ö–æ–¥ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- [ ] –í—Ö–æ–¥ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞)
- [ ] –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ (`/auth/me`)
- [ ] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- [ ] –í—Ö–æ–¥ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º
- [ ] –ü–µ—Ä–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (pull –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö)
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö (push —Å –∑–∞–ø–∏—Å—å—é –æ –ø–µ—Ä–µ–ª–∏–≤–∞–Ω–∏–∏)
- [ ] –ü–æ–≤—Ç–æ—Ä–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (pull —Å –¥–∞–Ω–Ω—ã–º–∏)
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ç–µ–º –∂–µ invite_code
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –æ–±–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–∏–¥—è—Ç –æ–¥–Ω–∏ –¥–∞–Ω–Ω—ã–µ
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ URL –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API –≤—ã –º–æ–∂–µ—Ç–µ:

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –∫ –±—ç–∫–µ–Ω–¥—É
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å SMTP** –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö email
3. **–î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å production –¥–µ–ø–ª–æ–π** –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ `DEPLOYMENT.md`

---

## üí° –°–æ–≤–µ—Ç—ã

- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Swagger UI** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Ç–æ–∫–µ–Ω—ã** –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ —Ñ–∞–π–ª—ã
- **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏** –ø—Ä–∏ –ª—é–±—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Postman** –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–π –∑–∞–ø—Ä–æ—Å–æ–≤
- **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ edge cases**: –ø—É—Å—Ç—ã–µ –ø–æ–ª—è, –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã, –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ UUID

---

–£–¥–∞—á–∏ –≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏! üéâ
